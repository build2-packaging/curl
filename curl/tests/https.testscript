# file      : tests/https.testscript
# copyright : Copyright (c) 2016-2019 Code Synthesis Ltd
# license   : cURL License; see accompanying COPYING file

: default
:
{
  $* --fail -sS 'https://www.example.com' >>~%EOO%
    %.+
    EOO
}

: override
:
: Specify the empty CA certificates bundle on the command line and make sure
: curl exits with the 'peer certificate cannot be authenticated with known CA
: certificates' exit code.
:
{
  $* -s 'https://www.example.com' --capath "$src_base/empty.pem" == 60
}
