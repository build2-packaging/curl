# file      : tests/https.testscript
# copyright : Copyright (c) 2016-2019 Code Synthesis Ltd
# license   : cURL License; see accompanying COPYING file
#\
: default
:
{
  test.options += -sS

  $* 'http://www.example.com' | set s;
  $* 'https://www.example.com' >"$s"
}

: override
:
: Specify the empty CA certificates bundle on the command line and make sure
: curl exits with the 'peer certificate cannot be authenticated with known CA
: certificates' exit code.
:
{
  $* -s 'https://www.example.com' --capath "$src_base/empty.pem" == 60
}
#\

: verbose
:
{
  $* -v --no-tcp-nodelay 'https://www.example.com' >! 2>&1
}
