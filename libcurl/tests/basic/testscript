# file      : tests/basic/testscript
# copyright : Copyright (c) 2016-2019 Code Synthesis Ltd
# license   : cURL License; see accompanying COPYING file

: http
:
$* 'http://www.example.com' >>~%EOO%
%<!doctype .*>%
%.+
EOO

: https
:
: Test that an HTTPS URL is queried successfully via the system SSL backend
: on Windows and MacOS/Clang and fails for other targets that use the OpenSSL
: backend by default.
:
if ($c.target.class == 'windows' || \
    $c.target.class == 'macos' && $c.id == 'clang-apple')
{
  $* 'http://www.example.com' | set s;
  $* 'https://www.example.com' >"$s"
}
else
{
  $* 'https://www.example.com' 2>~'%failed to request .+%' != 0
}
